import{u as F}from"./useSettingStore-BzqOtbVG.js";import{a as U,r as k,p as r,q as S,C as X,m as a,e,D as y,l as ae,x as O,c as $,j as t,t as J,f as G,F as N,k as K,_ as B,w as A,u as v,z as Q,h as Y,n as re,d as ce,S as Z,s as ee,E as ie,G as ue,T as de,g as me}from"./index-CxhtOLru.js";const ve={key:0,class:"icon-container"},fe={class:"color-key q-ml-md"},pe={class:"color-value"},_e=U({__name:"ThemeCard",props:["themeKey","value","current","changeTheme"],setup(d){const b=k(!1);function l(){b.value=!b.value}return(f,p)=>{const s=r("q-icon"),c=r("q-card");return S(),X(c,{onClick:p[0]||(p[0]=g=>d.changeTheme(d.themeKey)),flat:""},{default:a(()=>[e("div",{onContextmenu:l,class:K(["card-inner",b.value?"show-back":""])},[e("div",{class:"front shadow-5",style:y(`background-color: ${d.value.color.bg};color: ${d.value.color.active}`)},[ae(O(d.themeKey)+" ",1),d.current==d.themeKey?(S(),$("div",ve,[t(s,{name:"check_circle_outline",size:"3rem",class:"q-ma-sm"})])):J("",!0)],4),e("div",{class:"back column justify-center shadow-5",style:y(`background: linear-gradient(to bottom right ,${d.value.color.bg}, ${d.value.color.active})`)},[(S(!0),$(N,null,G(d.value.color,(g,i)=>(S(),$("div",{class:"row items-center q-px-xl",style:y(`color: ${g}`)},[e("div",{class:"color-square",style:y(`background-color: ${g}`)},null,4),e("div",fe,O(i)+" :",1),e("div",pe,O(g),1)],4))),256))],4)],34)]),_:1})}}}),ge=B(_e,[["__scopeId","data-v-d6ecbfd7"]]),be={class:"q-pa-md setting-tree"},qe={class:"row items-center q-ma-xs"},xe=U({__name:"SettingTree",props:["modelValue"],emits:["update:modelValue"],setup(d,{emit:b}){const{isPhone:l}=F(),f=b,p=k(d.modelValue);A(()=>d.modelValue,i=>{p.value=i});const s=["设置","主题"],c=k();A(p,(i,x)=>{if(s.includes(i)){p.value=x;const m=!c.value.isExpanded(i);c.value.setExpanded(i,m)}else f("update:modelValue",i)});const g=k([{label:"设置",icon:"settings",fontSize:"1.5rem",iconSize:"2rem",children:[{label:"通用",icon:"tune",fontSize:"1rem",iconSize:"1.4rem"},{label:"主题",icon:"color_lens",fontSize:"1rem",iconSize:"1.4rem",children:[{label:"切换主题",icon:"compare_arrows",fontSize:"1rem",iconSize:"1.4rem"},{label:"自定义主题",icon:"colorize",fontSize:"1rem",iconSize:"1.4rem"}]}]}]);return(i,x)=>{const m=r("q-icon"),o=r("q-tree");return S(),$("div",be,[t(o,{ref_key:"tree",ref:c,dense:v(l),"no-selection-unset":"","text-color":"text",color:"text",nodes:g.value,"node-key":"label","selected-color":"active",selected:p.value,"onUpdate:selected":x[0]||(x[0]=w=>p.value=w),"default-expand-all":""},{"default-header":a(w=>[e("div",qe,[t(m,{name:w.node.icon||"share",size:w.node.iconSize,class:"q-mr-sm"},null,8,["name","size"]),e("div",{class:"text-weight-bold",style:y(`font-size: ${w.node.fontSize}`)},O(w.node.label),5)])]),_:1},8,["dense","nodes","selected"])])}}}),he={class:"q-px-lg q-py-sm"},ye={class:"q-pa-md q-mt-lg"},Se={class:"row items-center"},we={class:"words-count q-ml-lg"},Te={class:"q-mt-sm words-setting"},$e={class:"row justify-end"},ke={class:"row q-pa-md q-mt-lg"},Ve={class:"col"},ze={class:"row q-pa-md q-mt-lg time-limit-setting"},Ce={class:"col row"},je=U({__name:"GeneralSetting",setup(d){const{isPhone:b,settings:l,saveSettings:f}=F(),p=Q({get(){return l.useDefaultWords?l.wordsString:l.customString},set(m){l.useDefaultWords?l.wordsString=m:l.customString=m}}),s=[{label:"20",value:20},{label:"30",value:30},{label:"40",value:40},{label:"50",value:50}];function c(m){l.generateWordsNum=m,f(l)}function g(m){l.useDefaultWords=m,f(l)}function i(){l.wordsString&&(l.wordsString+=" ",re(()=>{l.wordsString=l.wordsString.substring(0,l.wordsString.length-1)}))}const x=Q({get(){return l.limitTime||20},set(m){m>0&&(l.limitTime=m)}});return(m,o)=>{const w=r("q-toggle"),C=r("q-tooltip"),h=r("q-icon"),T=r("q-resize-observer"),D=r("q-input"),W=r("q-btn"),V=r("q-separator"),E=r("q-option-group");return S(),$("div",he,[o[12]||(o[12]=e("div",{class:"text-h5"},"词组设置",-1)),e("div",ye,[e("div",Se,[t(w,{"onUpdate:modelValue":[o[0]||(o[0]=_=>g(_)),o[1]||(o[1]=_=>v(l).useDefaultWords=_)],size:"50px",color:"active",dark:"","keep-color":"",modelValue:v(l).useDefaultWords},{default:a(()=>o[9]||(o[9]=[e("span",{class:"text-subtitle1"},"使用默认词组",-1)])),_:1},8,["modelValue"]),t(h,{size:"20px",color:"text",class:"q-ml-xs cursor-pointer",name:"info"},{default:a(()=>[t(C,{"transition-show":"scale","transition-hide":"scale",class:"text-btnText bg-active",anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:a(()=>o[10]||(o[10]=[e("b",{style:{"font-size":"13px"}},"设置词组时注意词组间用 | 分隔；",-1),e("br",null,null,-1),e("b",{style:{"font-size":"13px"}},"在保存时会自动忽略重复词组",-1)])),_:1})]),_:1}),e("span",we,"共"+O([...new Set(p.value.split("|"))].filter(_=>_.trim()!=="").length)+"词",1)]),e("div",Te,[t(D,{placeholder:"请在此处输入自定义词组...",disable:v(l).useDefaultWords,color:"active","input-class":"words-input",modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=_=>p.value=_),autogrow:"",outlined:""},{default:a(()=>[t(T,{onResize:i})]),_:1},8,["disable","modelValue"]),e("div",$e,[t(W,{onClick:o[3]||(o[3]=_=>v(f)(v(l))),disable:v(l).useDefaultWords,push:"",class:"q-mt-sm q-mr-sm",size:"16px",color:"active","text-color":"btnText"},{default:a(()=>o[11]||(o[11]=[e("span",{class:"q-px-md"},"保存",-1)])),_:1},8,["disable"])])])]),t(V,{class:"q-my-xl divider",color:"text"}),o[13]||(o[13]=e("div",{class:"text-h5 q-mt-xl"},"计时模式",-1)),e("div",ke,[e("div",{class:K(["row items-center text-subtitle1 q-ml-sm",v(b)?"col-12":"col-2"])},"默认生成词数",2),e("div",Ve,[t(E,{"onUpdate:modelValue":[o[4]||(o[4]=_=>c(_)),o[5]||(o[5]=_=>v(l).generateWordsNum=_)],modelValue:v(l).generateWordsNum,options:s,color:"active",dark:"",inline:""},null,8,["modelValue"])])]),t(V,{class:"q-my-xl divider",color:"text"}),o[14]||(o[14]=e("div",{class:"text-h5"},"限时模式",-1)),e("div",ze,[e("div",{class:K(["row items-center text-subtitle1 q-ml-sm",v(b)?"col-12":"col-2"])},"默认限定时长",2),e("div",Ce,[t(D,{onBlur:o[6]||(o[6]=_=>v(f)(v(l))),onKeydown:o[7]||(o[7]=Y(_=>v(f)(v(l)),["enter"])),suffix:"秒","input-class":"time-input",modelValue:x.value,"onUpdate:modelValue":o[8]||(o[8]=_=>x.value=_),color:"active",outlined:""},null,8,["modelValue"])])])])}}}),Ie=B(je,[["__scopeId","data-v-a354108b"]]),R={vue:{desc:"Vue官网配色",color:{active:"#42b883",error:"#ff6464",text:"#213547",btnText:"#ffffff",bg:"#ffffff"}},amber:{desc:"琥珀",color:{active:"#ffc107",error:"#c10015",text:"whitesmoke",btnText:"black",bg:"#282c34"}},watermelon:{desc:"测试",color:{active:"#3F7A63",error:"#9f2218",text:"#000000",btnText:"#ffffff",bg:"#f29089"}},"red/blue":{desc:"测试2",color:{active:"#EA3A4A",error:"white",text:"#000000",btnText:"#ffffff",bg:"#92C8E9"}},grey:{desc:"测试3",color:{active:"#17516e",error:"#9e0000",bg:"#cfcfcf",text:"#000000",btnText:"#ffffff"}}},L=ce("theme",()=>{const d=k("vue"),b=localStorage.getItem("theme"),l=b?JSON.parse(b):null;l&&(d.value=l.name);let f=k({...R});function p(){const c=localStorage.getItem("custom-theme-list"),g=c?JSON.parse(c):{};f.value={...R,...g}}p();function s(c){if(!(c in f.value)){console.error(`要切换的主题${c}不存在`);return}const g=f.value[c];Object.entries(g.color).forEach(([x,m])=>{Z(x,m)}),d.value=c;const i={...g,name:c};localStorage.setItem("theme",JSON.stringify(i))}return{changeTheme:s,refreshThemeList:p,themes:f,current:d}}),Oe={class:"q-px-lg q-py-sm"},Ne={class:"q-pa-md q-mt-lg row"},Ue={class:"row q-gutter-lg justify-center"},De={class:"en-word",style:{opacity:"0.5"}},We={class:"q-my-md row q-gutter-md justify-center"},Le={key:0,class:"checked-icon"},Be={class:"column q-gutter-lg col-4 color-choose"},Ee={class:"row items-center"},Je={class:"row justify-start q-ml-lg q-mt-md btn-group"},Ke=U({__name:"CustomTheme",setup(d){const{refreshThemeList:b}=L(),{current:l}=ee(L()),f=ie(),p=localStorage.getItem("custom-theme")?JSON.parse(localStorage.getItem("custom-theme")):{active:"",error:"",bg:"",text:"",btnText:""},s=k({desc:"",color:p,name:"custom"});Object.keys(s.value.color).forEach(u=>{A(()=>s.value.color[u],n=>{n!==""&&m(u)})});const c={active:"#00aaff",error:"#ff0000",bg:"#ffffff",text:"#000000",btnText:"#ffffff"},g={active:"主题颜色",error:"错误颜色",bg:"背景颜色",text:"文字颜色",btnText:"按钮文字颜色"};function i(){localStorage.setItem("custom-theme",JSON.stringify(s.value.color)),f.notify({type:"positive",message:"当前主题已保存！",position:"bottom-right",timeout:2e3})}function x(){let u="";for(const[n,z]of Object.entries(s.value.color).reverse())z===""&&(u=n);return u?(o[u].classList.remove("shake"),o[u].offsetWidth,o[u].classList.add("shake"),f.notify({type:"negative",message:`请确定${g[u]}！`,position:"bottom-right",timeout:2e3})):localStorage.setItem("custom-theme",JSON.stringify(s.value.color)),!u}function m(u){o[u].classList.remove("shake")}const o={},w=(u,n)=>{u&&(o[n]=u)};function C(){x()&&(Object.entries(s.value.color).forEach(([u,n])=>{Z(u,n)}),l.value=s.value.name,localStorage.setItem("theme",JSON.stringify(s.value)))}const h=k(!1),T=k("");function D(){x()&&(T.value="",h.value=!0)}const W=localStorage.getItem("custom-theme-list"),V=W?JSON.parse(W):{};function E(){_(T.value)&&(V[T.value]=s.value,localStorage.setItem("custom-theme-list",JSON.stringify(V)),f.notify({type:"positive",message:`已将主题 [${T.value}] 添加至主题列表中`,position:"bottom-right",timeout:2e3}),localStorage.removeItem("custom-theme"),s.value.color={active:"",error:"",bg:"",text:"",btnText:""},b(),l.value==="custom"&&(l.value=T.value),h.value=!1)}function _(u){return!(Object.keys(R).includes(u)||Object.keys(V).includes(u))}return(u,n)=>{const z=r("q-card"),P=r("q-icon"),te=r("q-color"),oe=r("q-popup-proxy"),M=r("q-input"),j=r("q-btn"),H=r("q-card-section"),le=r("q-card-actions"),se=r("q-dialog"),ne=ue("close-popup");return S(),$(N,null,[e("div",Oe,[n[10]||(n[10]=e("div",{class:"text-h5 q-mb-xl"},"定制主题",-1)),e("div",Ne,[e("div",{class:"col q-mx-lg q-pa-md example-container column justify-center",style:y(`background: ${s.value.color.bg};color: ${s.value.color.text}`)},[e("div",Ue,[e("div",{class:"column items-center word-block",style:y(`color: ${s.value.color.active}`)},n[3]||(n[3]=[e("div",{class:"cn-word"},"示例",-1),e("div",{class:"en-word"},[e("code",null,"shili")],-1)]),4),e("div",{class:"column items-center word-block",style:y(`color: ${s.value.color.error}`)},n[4]||(n[4]=[e("div",{class:"cn-word"},"示例",-1),e("div",{class:"en-word"},[e("code",null,"shili")],-1)]),4),e("div",{class:"column items-center word-block",style:y(`color: ${s.value.color.text}`)},[n[6]||(n[6]=e("div",{class:"cn-word"},"示例",-1)),e("div",De,[e("div",{class:"caret waiting",style:y(`background: ${s.value.color.active}`)},null,4),n[5]||(n[5]=e("code",{style:{"margin-left":"-2.5px"}},"shili",-1))])],4)]),e("div",We,[t(z,{class:"column justify-center items-center shadow-3",style:y(`color: ${s.value.color.btnText};background: ${s.value.color.active}`)},{default:a(()=>n[7]||(n[7]=[e("div",null,"示例",-1),e("div",null,"shili",-1)])),_:1},8,["style"]),t(z,{class:"column justify-center items-center shadow-3",style:y(`color: ${s.value.color.btnText};background: ${s.value.color.error}`)},{default:a(()=>n[8]||(n[8]=[e("div",null,"示例",-1),e("div",null,"shili",-1)])),_:1},8,["style"]),t(z,{class:"column justify-center items-center shadow-3",style:y(`color: ${s.value.color.text}; background: ${s.value.color.bg}`)},{default:a(()=>n[9]||(n[9]=[e("div",null,"示例",-1),e("div",null,"shili",-1)])),_:1},8,["style"])]),v(l)==="custom"?(S(),$("div",Le,[t(P,{name:"check_circle_outline",size:"3rem",class:"q-ma-sm"})])):J("",!0)],4),e("div",Be,[(S(!0),$(N,null,G(Object.keys(c),q=>(S(),$("div",Ee,[t(de,{name:"dot"},{default:a(()=>[s.value.color[q]?(S(),$("div",{key:0,class:"color-dot q-mr-sm",style:y(`background-color: ${s.value.color[q]}`)},null,4)):J("",!0)]),_:2},1024),e("div",{ref_for:!0,ref:I=>w(I,q)},[t(M,{"input-class":"theme-input",color:"active","label-color":"text",modelValue:s.value.color[q],"onUpdate:modelValue":I=>s.value.color[q]=I,label:g[q],outlined:""},{append:a(()=>[t(P,{name:"colorize",color:"text",class:"cursor-pointer"},{default:a(()=>[t(oe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[t(te,{modelValue:s.value.color[q],"onUpdate:modelValue":I=>s.value.color[q]=I,"default-value":c[q],"no-header-tabs":""},null,8,["modelValue","onUpdate:modelValue","default-value"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","label"])],512)]))),256))])]),e("div",Je,[t(j,{onClick:i,class:"q-mr-sm q-ml-md",icon:"save",label:"保存",size:"16px",color:"active","text-color":"btnText",push:""}),t(j,{onClick:C,class:"q-mr-sm",icon:"check_circle",label:"应用",size:"16px",color:"active","text-color":"btnText",push:""}),t(j,{onClick:D,icon:"dashboard",label:"添加至主题列表",size:"16px",color:"active","text-color":"btnText",push:""})])]),t(se,{modelValue:h.value,"onUpdate:modelValue":n[2]||(n[2]=q=>h.value=q),persistent:""},{default:a(()=>[t(z,{style:{"min-width":"350px","background-color":"var(--q-bg)"}},{default:a(()=>[t(H,null,{default:a(()=>n[11]||(n[11]=[e("div",{class:"text-h6"},"为该主题命名",-1)])),_:1}),t(H,{class:"q-pt-none"},{default:a(()=>[t(M,{"input-class":"theme-input",color:"active",dense:"",modelValue:T.value,"onUpdate:modelValue":n[0]||(n[0]=q=>T.value=q),autofocus:"",onKeyup:n[1]||(n[1]=Y(q=>h.value=!1,["enter"])),rules:[q=>_(q)||"已存在该名称的主题！"]},null,8,["modelValue","rules"])]),_:1}),t(le,{align:"right",class:"text-primary"},{default:a(()=>[me(t(j,{color:"error",flat:"",label:"算了"},null,512),[[ne]]),t(j,{onClick:E,color:"active",flat:"",label:"确定"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Ae=B(Ke,[["__scopeId","data-v-9533e7b1"]]),Re={class:"q-px-xl q-py-md row q-gutter-lg"},Fe=U({__name:"Setting",setup(d){const{isPhone:b}=F(),{changeTheme:l}=L(),{themes:f,current:p}=ee(L()),s=k(b?30:20),c=k("通用");return(g,i)=>{const x=r("q-separator"),m=r("q-avatar"),o=r("q-tab-panel"),w=r("q-tab-panels"),C=r("q-splitter");return S(),$(N,null,[t(x,{color:"text"}),t(C,{horizontal:v(b),modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=h=>s.value=h),"separator-style":"background-color: var(--q-text)",style:{height:"calc(100vh - 170px)"}},{before:a(()=>[t(xe,{modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=h=>c.value=h)},null,8,["modelValue"])]),separator:a(()=>[t(m,{color:"active","text-color":"btnText",size:"40px",icon:"drag_indicator"})]),after:a(()=>[t(w,{modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=h=>c.value=h),animated:"","transition-prev":"slide-down","transition-next":"slide-up","transition-duration":"500"},{default:a(()=>[t(o,{name:"通用"},{default:a(()=>[t(Ie)]),_:1}),t(o,{name:"切换主题"},{default:a(()=>[e("div",Re,[(S(!0),$(N,null,G(v(f),(h,T)=>(S(),X(ge,{class:"q-ma-md",key:T,themeKey:T,value:h,current:v(p),changeTheme:v(l)},null,8,["themeKey","value","current","changeTheme"]))),128))])]),_:1}),t(o,{name:"自定义主题"},{default:a(()=>[t(Ae)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["horizontal","modelValue"]),t(x,{color:"text"})],64)}}}),Me=B(Fe,[["__scopeId","data-v-b6626e62"]]);export{Me as default};
